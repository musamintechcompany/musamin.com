window.togglePasswordVisibility=function(t){const e=document.getElementById(t);if(!e)return;const n=t==="password"?"passwordEye":"confirmEye",r=e.type==="password";e.type=r?"text":"password",document.getElementById(`${n}Open`)?.classList.toggle("hidden",r),document.getElementById(`${n}Pupil`)?.classList.toggle("hidden",r),document.getElementById(`${n}Closed`)?.classList.toggle("hidden",!r)};function d(){const t={password:document.getElementById("password"),bar:document.getElementById("passwordStrengthBar"),text:document.getElementById("strengthText"),container:document.getElementById("strengthMeterContainer")};if(!Object.values(t).every(n=>n))return;const e=[{width:"20%",color:"bg-red-500",label:"Very Weak",minScore:0},{width:"40%",color:"bg-orange-400",label:"Weak",minScore:1},{width:"60%",color:"bg-yellow-400",label:"Medium",minScore:2},{width:"80%",color:"bg-green-400",label:"Strong",minScore:3},{width:"100%",color:"bg-green-600",label:"Very Strong",minScore:4}];t.password.addEventListener("input",()=>{const n=t.password.value;if(t.container.classList.toggle("hidden",!n),!n)return;const r=i(n),s=e.findLast(o=>r>=o.minScore)||e[0];a(t,s)})}function i(t){let e=0;return t.length>=8&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/\d/.test(t)&&e++,/[^\w\s]/.test(t)&&e++,e}function a(t,e){t.bar.style.width=e.width,t.bar.className=`h-full ${e.color} transition-all duration-300`,t.text.textContent=e.label}function l(t,e){document.querySelectorAll('[id$="Error"]').forEach(r=>r.classList.add("hidden")),document.getElementById("errorToast")?.classList.add("hidden");const n=c();return n.length?(e.preventDefault(),m(n),!1):(g(!0),!0)}function c(){const t=[],e={name:{value:document.getElementById("name")?.value.trim(),required:!0},email:{value:document.getElementById("email")?.value.trim(),required:!0,validate:n=>/^\S+@\S+\.\S+$/.test(n)},password:{value:document.getElementById("password")?.value,required:!0,validate:n=>n.length>=8},confirm:{value:document.getElementById("password_confirmation")?.value,validate:n=>n===document.getElementById("password")?.value},terms:{value:document.getElementById("terms")?.checked,required:!!document.getElementById("terms")}};return Object.entries(e).forEach(([n,r])=>{r.required&&!r.value?t.push({field:n,message:"This field is required"}):r.validate&&!r.validate(r.value)&&t.push({field:n,message:u(n)})}),t}function u(t){return{email:"Please enter a valid email",password:"Password must be at least 8 characters",confirm:"Passwords do not match",terms:"You must agree to the terms"}[t]||"Invalid value"}function m(t){t.forEach(({field:e,message:n})=>{const r=document.getElementById(`${e}Error`);r&&(r.textContent=n,r.classList.remove("hidden"))}),h("Please correct the highlighted errors")}function g(t){document.getElementById("spinner")?.classList.toggle("hidden",!t);const e=document.getElementById("buttonText");e&&(e.textContent="Creating Account..."),document.getElementById("registerBtn").disabled=t}function h(t){const e=document.getElementById("errorToast");e&&(e.textContent=t,e.classList.remove("hidden"),e.classList.add("slide-down"),setTimeout(()=>{e.classList.remove("slide-down"),e.classList.add("hidden")},5e3))}document.addEventListener("DOMContentLoaded",()=>{d();const t=document.getElementById("registerForm");t&&t.addEventListener("submit",e=>{l(t,e)||e.preventDefault()})});
